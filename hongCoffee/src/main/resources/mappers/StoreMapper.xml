<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<!-- namespace="com.itwillbs.mappers.boardMapper"  -->
<!--        => boardMapper 파일 => xml 파일이름  -->
<mapper namespace="com.itwillbs.mappers.StoreMapper">

	<select id="userCheck" resultType="com.itwillbs.domain.StoreDTO">
		select * from store
		where num = #{num} and pw = #{pw}
	</select>


	<select id="getitemList" resultType="com.itwillbs.domain.ItemDTO"> 

 		select * from item 
 	</select>

	<select id="getStockList" resultType="com.itwillbs.domain.StockDTO"> 
 		select s.stock_num, t.item_type, t.item_name, t.item_price, s.amount, t.item_state
 		from stock s join item t on s.item_num = t.item_num
 	</select>

	<select id="getOrderList" resultType="com.itwillbs.domain.OrderDTO"> 
 		select t.item_name, o.od_amount, t.item_price, o.od_time, o.received_not
 		from `order` o join item t on o.item_num = t.item_num
 	</select>
 	
 	<select id="getReceiveList" resultType="com.itwillbs.domain.ReceiveDTO"> 
		select r.od_num, t.item_name, r.rc_amount, t.item_price, r.rc_time, r.pay
		from receive r join item t on r.item_num = t.item_num
 	</select>

	 <select id="getResultList" resultType="com.itwillbs.domain.ResultDTO"> 
		select r.rs_date "rs_date", sum((r.sales*p.prod_price)) "maechul", sum((r.consume*i.item_price)) "jichul", (sum((r.sales*p.prod_price))-sum((r.consume*i.item_price))) "income"
		from result r left join product p
		on r.prod_num = p.prod_num
		left join stock s on r.stock_num = s.stock_num
		left join item i on s.item_num = i.item_num
		where r.num = 1
		group by r.rs_date;
 	</select>
 	
 	<select id="getSomoList" resultType="com.itwillbs.domain.ResultDTO"> 
		select r.rs_date, i.item_name, r.consume, i.item_price
		from result r join stock s on r.stock_num = s.stock_num
		join item i on s.item_num = i.item_num
		order by r.rs_date; 
 	</select>

        
    <select id="getPanmeList" resultType="com.itwillbs.domain.ResultDTO"> 
	    select r.rs_date , p.prod_name, r.sales, p.prod_price
        from result r join product p on r.prod_num = p.prod_num
        order by r.rs_date; 
 	</select>

</mapper>


